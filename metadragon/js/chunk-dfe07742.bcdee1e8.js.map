{"version":3,"sources":["webpack:///./src/views/homepage/index.js","webpack:///./src/views/homepage","webpack:///./src/views/homepage/index.ph.vue?2fc1","webpack:///./src/views/homepage/index.ph.vue?97ec","webpack:///./src/views/homepage/index.ph.vue","webpack:///./src/assets/homepage/icon-windows.png","webpack:///./src/assets/homepage/icon-copy.png","webpack:///./src/assets/homepage/icon-android.png"],"names":["name","data","downloadLink","android","exe","links","contract","link","lbAddress","lcAddress","NftAddress","dialogHandleValue","getAuthErr","mounted","this","$nextTick","getLbAuth","r","init","$route","query","ref","getRef","computed","mapGetters","web3Provider","haveAuth","methods","mapActions","setHaveAuth","setHaveRes","web3","eth","getAccounts","address","userAddress","isRe","refAddress","haveRes","length","contractTask","Contract","AbiTask","friendTaskAddress","getRes","call","is","addRe","reAddress","trim","add_re","send","from","isAddSuccess","value","isReBool","userIsRe","$prompt","confirmButtonText","cancelButtonText","inputValue","closeOnPressEscape","closeOnClickModal","then","isAddRE","status","$message","error","getAuth","res","contractAddress","usdt_address","UsdtAddress","AbiUSDT","allowance","rs","y","Decimal","contract721","Abi721Nft","getUSDT_Price","usdt_price","sub","usdtContract","approve","sendStatic","success","warning","LbAddress","AbiLb","mycopy","text","textareaEl","document","createElement","setAttribute","body","appendChild","select","execCommand","removeChild","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","_l","item","index","key","on","$event","directives","rawName","expression","staticRenderFns","component","module","exports"],"mappings":"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","file":"js/chunk-dfe07742.bcdee1e8.js","sourcesContent":["import {\r\n\tmapActions,\r\n\tmapGetters,\r\n} from \"vuex\";\r\nimport Abi721Nft from \"@/jsons/abi-721-NFT.js\";\r\nimport AbiLCErc20 from \"@/jsons/abi-LC-ERC20.js\";\r\nimport AbiTask from \"@/jsons/abi-friendTask.js\"\r\nimport AbiUSDT from \"@/jsons/USDT_token_abi.js\";\r\nimport AbiLb from \"@/jsons/LB_abi.js\";\r\nimport Decimal from \"decimal.js\";\r\nimport {\r\n\tNftAddress,\r\n\tUsdtAddress,\r\n\tlbAddress,\r\n\tlcAddress,\r\n\tfriendTaskAddress,\r\n} from \"@/jsons/contractAddress.js\"\r\nexport default {\r\n\tname: 'homepage',\r\n\tdata: () => ({\r\n\t\tdownloadLink: {\r\n\t\t\tandroid: 'http://down.metadragon.games/MetaDragon.apk',\r\n\t\t\texe: 'http://down.metadragon.games/MetaDragon.exe'\r\n\t\t},\r\n\t\tlinks: [\r\n\t\t\t{\r\n\t\t\t\tcontract: 'LB',\r\n\t\t\t\tlink: lbAddress\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tcontract: 'LC',\r\n\t\t\t\tlink: lcAddress\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tcontract: 'NFT',\r\n\t\t\t\tlink: NftAddress\r\n\t\t\t},\r\n\t\t],\r\n\t\tdialogHandleValue: false,\r\n\t\tgetAuthErr: false,\r\n\t}),\r\n\tmounted() {\r\n\t\tthis.$nextTick(async () => {\r\n\t\t\t// this.getAuth();\r\n\t\t\tlet r = await this.getLbAuth();\r\n\t\t\tthis.init()\r\n\t\t\tif (this.$route.query.ref && r) {\r\n\t\t\t\tthis.getRef(this.$route.query.ref)\r\n\t\t\t};\r\n\t\t\t// this.getLbAuth1();\r\n\t\t})\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters({\r\n\t\t\tweb3Provider: 'web3Provider',\r\n\t\t\thaveAuth: 'haveAuth'\r\n\t\t}),\r\n\t},\r\n\tmethods: {\r\n\t\t...mapActions({\r\n\t\t\tsetHaveAuth: 'setHaveAuth',\r\n\t\t\tsetHaveRes: 'setHaveRes',\r\n\t\t}),\r\n\t\tasync init() {\r\n\t\t\tif (!this.web3Provider) return;\r\n\t\t\tconst web3 = this.web3Provider;\r\n\t\t\tlet address = await web3.eth.getAccounts();\r\n\t\t\tconst userAddress = address[0];\r\n\t\t\tconst refAddress = await this.isRe(userAddress);\r\n\t\t\tlet haveRes = refAddress.length > 0;\r\n\t\t\tconsole.log(\"haveRes\",haveRes);\r\n\t\t\tthis.setHaveRes(haveRes)\r\n\t\t},\r\n\t\tasync isRe(address) {\r\n\t\t\tif (!this.web3Provider) return;\r\n\t\t\tlet web3 = this.web3Provider;\r\n\t\t\tconst contractTask = new web3.eth.Contract(AbiTask, friendTaskAddress);\r\n\t\t\tconst is = await contractTask.methods.getRes(address).call();\r\n\t\t\tif (is == '0x0000000000000000000000000000000000000000') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn is;\r\n\t\t},\r\n\r\n\t\tasync addRe(reAddress) {\r\n\t\t\tif (!this.web3Provider) return;\r\n\t\t\tlet web3 = this.web3Provider;\r\n\t\t\treAddress = reAddress.trim()\r\n\t\t\tconsole.log(\"addRe\", reAddress);\r\n\t\t\tlet address = await web3.eth.getAccounts();\r\n\t\t\tconst contractTask = new web3.eth.Contract(AbiTask, friendTaskAddress);\r\n\t\t\ttry {\r\n\t\t\t\tconst isAddSuccess = await contractTask.methods.add_re(reAddress).send({\r\n\t\t\t\t\tfrom: address[0],\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"addRe\", isAddSuccess);\r\n\t\t\t\treturn isAddSuccess;\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"addRe err\", e);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync getRef(value) {\r\n\t\t\tif (!this.web3Provider) return;\r\n\t\t\tlet web3 = this.web3Provider;\r\n\t\t\tconst address = await new web3.eth.getAccounts();\r\n\t\t\tconsole.log(address)\r\n\r\n\t\t\tconst isReBool = await this.isRe(value);\r\n\t\t\tconst userIsRe = await this.isRe(address[0]);\r\n\t\t\tconsole.log(isReBool, userIsRe)\r\n\t\t\tif (isReBool && !userIsRe) {\r\n\t\t\t\tthis.$prompt('推荐人地址', '设置推荐人', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\tinputValue: value,\r\n\t\t\t\t\tcloseOnPressEscape: false,\r\n\t\t\t\t\tcloseOnClickModal: false,\r\n\t\t\t\t}).then(async ({ value }) => {\r\n\t\t\t\t\t//0x5c2571f4AaBc057a100bDfc058264EEE9C65C3D3\r\n\t\t\t\t\tlet isAddRE = await this.addRe(value);\r\n\t\t\t\t\tconsole.log(\"isAddRE\", isAddRE)\r\n\t\t\t\t\tif (!isAddRE.status) {\r\n\t\t\t\t\t\tthis.$message.error('Execution failed')\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn isAddRE.status\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetAuth() {\r\n\t\t\tconsole.log('homepage', this.web3Provider)\r\n\t\t\tif (!this.web3Provider) return;\r\n\t\t\tconsole.log(\"this.web3Provider--4456\");\r\n\t\t\tthis.dialogHandleValue = true;\r\n\t\t\tthis.getAuthErr = false;\r\n\t\t\tlet web3 = this.web3Provider;\r\n\t\t\tweb3.eth.getAccounts().then(async res => {\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t\t// this.loading = true;\r\n\t\t\t\tlet address = res[0];\r\n\t\t\t\tlet contractAddress = NftAddress;\r\n\t\t\t\tlet usdt_address = UsdtAddress;\r\n\t\t\t\tlet contract = new web3.eth.Contract(AbiUSDT, usdt_address);\r\n\t\t\t\tlet rs = await contract.methods.allowance(address, contractAddress).call();\r\n\t\t\t\tconsole.log(rs);\r\n\t\t\t\tlet y = new Decimal(rs)\r\n\t\t\t\tconsole.log(y);\r\n\t\t\t\tlet contract721 = new web3.eth.Contract(Abi721Nft, contractAddress);\r\n\t\t\t\tlet usdt_price = await contract721.methods.getUSDT_Price().call();\r\n\t\t\t\t// let usdt = new Decimal(usdt_price);\r\n\t\t\t\tif (y.sub(usdt_price) < 0) {\r\n\t\t\t\t\tlet usdtContract = new web3.eth.Contract(AbiUSDT, usdt_address);\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet sendStatic = await usdtContract.methods\r\n\t\t\t\t\t\t\t.approve(\r\n\t\t\t\t\t\t\t\tcontractAddress,\r\n\t\t\t\t\t\t\t\t\"11579208923731695423570985008687907853269984665640564039457584007913129639936\"\r\n\t\t\t\t\t\t\t).send({\r\n\t\t\t\t\t\t\t\tfrom: address\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (sendStatic.status) {\r\n\t\t\t\t\t\t\tthis.setHaveAuth(true)\r\n\t\t\t\t\t\t\tthis.dialogHandleValue = false;\r\n\t\t\t\t\t\t\tthis.$message.success(\"approve success\")\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.warning(\"approve grant failed\")\r\n\t\t\t\t\t\t\tthis.getAuthErr = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tthis.$message.warning(\"approve grant failed\")\r\n\t\t\t\t\t\tthis.getAuthErr = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//取消授权按\r\n\t\t\t\t\t// this.loading = false;\r\n\t\t\t\t\tthis.$message.success(\"approve success！\")\r\n\t\t\t\t\tthis.dialogHandleValue = false;\r\n\t\t\t\t\tthis.getAuthErr = false;\r\n\t\t\t\t\tthis.setHaveAuth(true)\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(this.haveAuth)\r\n\t\t\t})\r\n\t\t},\r\n\t\tgetLbAuth() {\r\n\t\t\t// console.log('homepage',this.web3Provider)\r\n\t\t\tif (!this.web3Provider) return;\r\n\t\t\t// console.log(\"this.web3Provider--4456\");\r\n\t\t\tthis.dialogHandleValue = true;\r\n\t\t\tthis.getAuthErr = false;\r\n\t\t\tlet web3 = this.web3Provider;\r\n\t\t\treturn web3.eth.getAccounts().then(async res => {\r\n\t\t\t\t// console.log(res);\r\n\t\t\t\t// this.loading = true;\r\n\t\t\t\tlet address = res[0];\r\n\t\t\t\tlet contractAddress = NftAddress;\r\n\t\t\t\tlet LbAddress = lbAddress;\r\n\t\t\t\tlet contract = new web3.eth.Contract(AbiLb, LbAddress);\r\n\t\t\t\tlet rs = await contract.methods.allowance(address, contractAddress).call();\r\n\t\t\t\t// console.log(rs);\r\n\t\t\t\tlet y = new Decimal(rs)\r\n\t\t\t\t// console.log(y);\r\n\t\t\t\tlet contract721 = new web3.eth.Contract(Abi721Nft, contractAddress);\r\n\t\t\t\tlet usdt_price = await contract721.methods.getUSDT_Price().call();\r\n\t\t\t\t// let usdt = new Decimal(usdt_price);\r\n\t\t\t\tif (y.sub(usdt_price) < 0) {\r\n\t\t\t\t\tlet usdtContract = new web3.eth.Contract(AbiLb, LbAddress);\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tlet sendStatic = await usdtContract.methods\r\n\t\t\t\t\t\t\t.approve(\r\n\t\t\t\t\t\t\t\tcontractAddress,\r\n\t\t\t\t\t\t\t\t\"11579208923731695423570985008687907853269984665640564039457584007913129639936\"\r\n\t\t\t\t\t\t\t).send({\r\n\t\t\t\t\t\t\t\tfrom: address\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (sendStatic.status) {\r\n\t\t\t\t\t\t\tthis.setHaveAuth(true)\r\n\t\t\t\t\t\t\tthis.dialogHandleValue = false;\r\n\t\t\t\t\t\t\tthis.$message.success(\"approve success\")\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.warning(\"approve grant failed\")\r\n\t\t\t\t\t\t\tthis.getAuthErr = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\tthis.$message.warning(\"approve grant failed\")\r\n\t\t\t\t\t\tthis.getAuthErr = true;\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//取消授权按\r\n\t\t\t\t\t// this.loading = false;\r\n\t\t\t\t\tthis.$message.success(\"approve success！\")\r\n\t\t\t\t\tthis.dialogHandleValue = false;\r\n\t\t\t\t\tthis.getAuthErr = false;\r\n\t\t\t\t\tthis.setHaveAuth(true)\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(this.haveAuth)\r\n\t\t\t})\r\n\t\t},\r\n\t\tmycopy(text) {\r\n\t\t\tlet textareaEl = document.createElement('textarea');\r\n\t\t\ttextareaEl.setAttribute('readonly', 'readonly'); // 防止手机上弹出软键盘\r\n\t\t\ttextareaEl.value = text;\r\n\t\t\tdocument.body.appendChild(textareaEl);\r\n\t\t\ttextareaEl.select();\r\n\t\t\tlet success = document.execCommand('copy');\r\n\t\t\tdocument.body.removeChild(textareaEl);\r\n\t\t\tif (success) {\r\n\t\t\t\tthis.$message.success('copy success');\r\n\t\t\t}\r\n\t\t\treturn success;\r\n\t\t}\r\n\t}\r\n}\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!./index.js?vue&type=script&charset=utf-8&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.3@babel-loader/lib/index.js!./index.js?vue&type=script&charset=utf-8&lang=js&\"","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/index.js??vue-loader-options!./index.ph.vue?vue&type=style&index=0&id=04c82fcd&lang=scss&scoped=scoped&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"homepage-view\"},[_c('h5',{staticClass:\"introduce-title max-w\"},[_vm._v(\" \"+_vm._s(_vm.$t('homepage.title'))+\" \")]),_c('div',{staticClass:\"banner player\"}),_c('ul',{staticClass:\"download-buttons\"},[_c('li',{staticClass:\"button button-download banner\"},[_c('a',{attrs:{\"href\":_vm.downloadLink.android,\"download\":\"\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/homepage/icon-android.png\"),\"alt\":\"\"}}),_c('p',[_vm._v(\"ANDROID\")])])]),_c('li',{staticClass:\"button button-download banner\"},[_c('a',{attrs:{\"href\":_vm.downloadLink.exe,\"download\":\"\"}},[_c('img',{attrs:{\"src\":require(\"@/assets/homepage/icon-windows.png\"),\"alt\":\"\"}}),_c('p',[_vm._v(\"PC\")])])])]),_c('div',{staticClass:\"banner button button-inter\"},[_vm._v(_vm._s(_vm.$t('homepage.buttonText')))]),_c('h5',{staticClass:\"introduce-title is-add\"},[_vm._v(\"$ \"+_vm._s(_vm.$t('homepage.listTitle')))]),_vm._l((_vm.links),function(item,index){return _c('div',{key:index,staticClass:\"opacity-p\",on:{\"click\":function($event){return _vm.mycopy(item.link)}}},[_c('p',[_c('span',[_vm._v(_vm._s(item.contract))]),_c('img',{attrs:{\"src\":require(\"@/assets/homepage/icon-copy.png\")}})]),_c('p',[_vm._v(_vm._s(item.link))])])}),_c('el-dialog',{staticClass:\"dialog-dom\",attrs:{\"title\":\"Get Approve\",\"visible\":_vm.dialogHandleValue,\"center\":\"\",\"width\":\"90%\",\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"show-close\":false},on:{\"update:visible\":function($event){_vm.dialogHandleValue=$event}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.haveAuth != true && _vm.getAuthErr != true),expression:\"haveAuth != true && getAuthErr != true\"}]},[_c('i',{staticClass:\"el-icon-loading\"}),_c('p',[_vm._v(\"get approve\")]),_c('p',[_vm._v(\"正在获取授权\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.haveAuth != true && _vm.getAuthErr == true),expression:\"haveAuth != true && getAuthErr == true\"}]},[_c('p',[_vm._v(\"授权失败，请重试\")]),_c('p',[_vm._v(\"failed,please try again\")]),_c('el-button',{on:{\"click\":_vm.getLbAuth}},[_vm._v(\"try again\")])],1)])],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./index.ph.vue?vue&type=template&id=04c82fcd&scoped=true&\"\nimport script from \"./index.js?vue&type=script&charset=utf-8&lang=js&\"\nexport * from \"./index.js?vue&type=script&charset=utf-8&lang=js&\"\nimport style0 from \"./index.ph.vue?vue&type=style&index=0&id=04c82fcd&lang=scss&scoped=scoped&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.8@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04c82fcd\",\n  null\n  \n)\n\nexport default component.exports","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABa0lEQVRIS+2XvUoDURCFv6Mo8adJUEEF//8RO3tfxkILEVTwGcTKRgvfQ7D2CcRGfAMF7W2ODG4khiS7SVYDYS8sLNw7c849s8yeEX+wbA8DC8AqsA5sA8vACjAqqaxucG1P1CSM5AESYIvAWJPcb5KmUoFtjwBLwBrwIunJ9jFwCkwDA22S/w1sezJhH4yr7AMs2JeS5IeSrm1fAGdtAlaPfwPbvge2gBkgTYF9Sbd5Ab8CcdssqwDOolL9mZ8aF1K3kq8/Pq53oJzxKzmQdGP7EjjJGFN/7ENSJRrIERBNPW0NAneSHm3vAbuA04Ia7H9KukrrVB3kzRbSuxvb7lmNiwbS/w2kqPG/1fgB2AQqGXpOfn+nALMdfXg2Mdxhundq3ueAodxdZtotbY8nvjps73Piq8PanmdUqbH1SQNutp+oFJY4FIrxpKpSEJyvUSlf4FaEE5ViEAhSG4lvj2kknlLXs1OnakXcFyRVBC7xb2DGAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAANCAYAAABy6+R8AAAA+klEQVQoU4XSsSvuURgH8M/XIF3vpMx3cRcSdQflH7GZFP+CMIhkxpVJjEruIoMyWRnueneJBbEZjk756e3Nj7OcznPO55znPOfEeyuljOMYP5tYT/+C5SR76UKbmMY17nvAEObRl6STUsoo1jCAVxT0d6EbrGKmrksyWNF//MIVagrdbRhjOMMJthr0jL9JZj+7SynlEh3sdKOn98FKC9rHJP70op0kSy3oELWy2/W0Jr160ndoBOdYTDJQC/EdOsAUatlryYcbtJtksSW9I0zgFutJLip6qDvUAO56YH2Kutm/JL+buYoWsIEfLd/nEXNJTj9Qy8Ivw2+zH2UOjawPEgAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAACdklEQVRIS+2WS4jOYRTGf49rEsqGITWIJDSkRC5RKCSSWCjFwoJZYeOWYiNiYRZYMKVY2LmbRsrGJLmUhdhQ5JbLwpDrozO9n/59812bb6bUnOX/f87zvOfyvucRFZjtKZIeV+Da4WJ7kqQnpfxVCZjt3UCzpFfl/G1PABZJOlkL4kHALkl7bQ8HZgCjgf7AT+A9cE/SO9sHgX2S/nSZOJVvA7AZmAMMKAD6A3gAnJJ0ulxlypbadl/gELC9HFjmfzOwVdLXYjGVEJ8H1gO3gDjE/CJgv4CzQD2wEGgD5kmK752sJLHtHcDh1Mc6oB/wGigUF32eCkwDWhJTk6TGqohtjwSeAwNT4OdEOKxEyaPPcbg+GZ8GSY/yY4pmbPsAsKeKvhZzPSNpUzXErcDEGhBHC2ZKcharI2PbI4CVwFtJF21HqeYW6WW1ZwmOO5K+214ATAZuyvYQ4CEwLiHGMMUj8CmvV9USZv3HA7OAc+njtyBeBlzJeD0DGoAYpniZamFjgSPAmhxYEC8HLmfQnwLTu4H4KLC6l7i31D0yXCuASz1wnY4Bq7JTHWssrlDuzl4D1gEfanyPNwL7/xGnJzN27LYkYeLV+tINxG+AnemNuFpwO9kenB6QWHG1sHpJLzotiULItm+HgqgBa8jckMe/KyWOrNcCIQhiDrZkAuP0x5MUis/Ru1CiOYtd3p6qdkHSx/wEymquNANLgBuZ4DZJs9O/WKGxUGLL5WyUpJBIRa1S4qXA9QzKXUmx5mKXxxxERlniMZJe/tfEizPKMRLJL3WIhqGZDOskxfXpcqkD9D4QSiKsUVJTDtX2iczwtUiK1pS0vyvz93KoCue7AAAAAElFTkSuQmCC\""],"sourceRoot":""}